import dash
from dash import html, dcc, register_page
import pandas as pd
import plotly.express as px
from pathlib import Path

register_page(__name__, path="/alcohol", name="Alcohol Stats")

# Load Data
DataPath = Path(__file__).resolve().parent.parent/"data"/"drinks.csv"
df = pd.read_csv(DataPath)

# Convert to gallons
df["total_gallons"] = df["total_litres_of_pure_alcohol"] * 0.264172

fig = px.bar(
    df.sort_values("total_gallons", ascending=False),
    x="country",
    y="total_gallons",
    title="Alcohol Consumption by Country (Gallons)",
    labels={"total_gallons": "Gallons of Pure Alcohol"},
    height=600
)

# Layout
layout = html.Div([
    html.H2("Alcohol Consumption Around the World", className="heading"),

    html.P(
        "This chart shows the average annual alcohol consumption per person by country, converted to gallons.",
        className="info-paragraph"
    ),

    dcc.Graph(figure=fig),

    html.A("Back to Home", href="/", className="nav-link"),

    html.Div("Source: FiveThirtyEight / WHO", className="source-note")
], className="page-container")
